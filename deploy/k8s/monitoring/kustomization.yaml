apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: monitoring

resources:
  - namespace.yaml
  - prometheus/
  - grafana/
  - loki/
  - jaeger/
  - alertmanager/
  - exporters/
  - ingress/
  - network-policy.yaml

# Common labels
commonLabels:
  app.kubernetes.io/part-of: insurance-lead-gen
  app.kubernetes.io/component: monitoring
  environment: production

# ConfigMap generator for Prometheus
configMapGenerator:
  - name: prometheus-config
    files:
      - prometheus/prometheus.yml
      - prometheus/alerts.yml
  - name: grafana-datasources
    files:
      - grafana/datasources.yaml
  - name: grafana-dashboard-providers
    files:
      - grafana/dashboard-providers.yaml
  - name: loki-config
    files:
      - loki/loki-config.yml

# Secret generator (for production)
secretGenerator:
  - name: grafana-admin-credentials
    literals:
      - admin-user=admin
      - admin-password=CHANGE_ME_IN_PRODUCTION

generatorOptions:
  disableNameSuffixHash: true
