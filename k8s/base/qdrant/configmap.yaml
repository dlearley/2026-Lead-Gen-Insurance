apiVersion: v1
kind: ConfigMap
metadata:
  name: qdrant-config
data:
  # Qdrant Configuration
  QDRANT__SERVICE__GRPC_PORT: "6334"
  QDRANT__SERVICE__HTTP_PORT: "6333"

  # Storage Configuration
  QDRANT__STORAGE__STORAGE_PATH: "/qdrant/storage"
  QDRANT__STORAGE__SNAPSHOTS_PATH: "/qdrant/storage/snapshots"

  # Performance Configuration
  QDRANT__STORAGE__OPTIMIZERS__INDEXING_THRESHOLD: "20000"
  QDRANT__STORAGE__OPTIMIZERS__VACUUM_THRESHOLD: "20000"
  QDRANT__STORAGE__OPTIMIZERS__INDEXING_INTERVAL_SEC: "5"
  QDRANT__STORAGE__OPTIMIZERS__VACUUM_INTERVAL_SEC: "5"
  QDRANT__STORAGE__OPTIMIZERS__DEFAULT_SEGMENT_NUMBER: "2"
  QDRANT__STORAGE__OPTIMIZERS__MAX_SEGMENT_NUMBER: "20"
  QDRANT__STORAGE__OPTIMIZERS__MAX_OPTIMIZATION_THREADS: "1"

  # Memory Configuration
  QDRANT__STORAGE__PERFORMANCE__MAX_OPTIMIZATION_THREADS: "1"
  QDRANT__STORAGE__PERFORMANCE__OPTIMIZER_CPU_BUDGET: "1"

  # Service Configuration
  QDRANT__SERVICE__MAX_REQUEST_SIZE_MB: "32"
  QDRANT__SERVICE__MAX_WORKERS: "0"
  QDRANT__SERVICE__QDRANT__API_KEY: ""  # From secrets

  # Telemetry Configuration
  QDRANT__TELEMETRY_DISABLED: "true"

  # Logging Configuration
  QDRANT__LOG_LEVEL: "INFO"

  # Snapshot Configuration
  QDRANT__STORAGE__SNAPSHOTS__PATH: "/qdrant/storage/snapshots"

  # Collection Configuration
  QDRANT__SERVICE__GRPC__MAX_MESSAGE_SIZE_MB: "32"

  # Replication Configuration
  QDRANT__CLUSTER__ENABLED: "true"
  QDRANT__CLUSTER__PEERS: "qdrant-0.qdrant:6335,qdrant-1.qdrant:6335"
  QDRANT__CLUSTER__CONSENSUS__MAX_MESSAGE_QUEUE_SIZE: "100"

  # Access Control
  QDRANT__SERVICE__ENABLE_AUTHORIZATION: "true"
  QDRANT__SERVICE__API_KEY: ""  # From secrets

  # Search Configuration
  QDRANT__SERVICE__SEARCH_N_BEST: "10"
  QDRANT__SERVICE__SEARCH_TIMEOUT_SEC: "5"

  # HNSW Configuration
  QDRANT__SERVICE__HNSW_INDEX_M: "16"
  QDRANT__SERVICE__HNSW_INDEX_EF_CONSTRUCT: "100"
  QDRANT__SERVICE__HNSW_INDEX_FULL_SCAN_THRESHOLD: "10000"
