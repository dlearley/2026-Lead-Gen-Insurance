apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
data:
  # Service Discovery
  API_URL: "http://api:80"
  DATA_SERVICE_URL: "http://data-service:80"
  ORCHESTRATOR_URL: "http://orchestrator:80"

  # Database
  DATABASE_URL: "postgresql://postgres:5432/insurance_lead_gen"
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  DATABASE_POOL_TIMEOUT: "30"

  # Redis
  REDIS_URL: "redis://redis:6379"
  REDIS_CACHE_TTL: "3600"
  REDIS_MAX_RETRIES: "3"

  # Neo4j
  NEO4J_URI: "bolt://neo4j:7687"
  NEO4J_USER: "neo4j"

  # Qdrant
  QDRANT_URL: "http://qdrant:6333"

  # NATS
  NATS_URL: "nats://nats:4222"
  NATS_STREAM: "backend-tasks"

  # Logging
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

  # Performance
  REQUEST_TIMEOUT: "30"
  MAX_CONCURRENT_REQUESTS: "100"

  # Celery Configuration
  CELERY_BROKER_URL: "redis://redis:6379/1"
  CELERY_RESULT_BACKEND: "redis://redis:6379/2"
  CELERY_TASK_TRACK_STARTED: "true"
  CELERY_TASK_TIME_LIMIT: "3600"

  # Email Configuration
  SMTP_HOST: ""  # From secrets
  SMTP_PORT: "587"
  SMTP_USE_TLS: "true"
  SMTP_FROM: "noreply@insurance-platform.com"

  # SMS Configuration
  SMS_PROVIDER: "twilio"  # twilio, sns, etc.
  SMS_FROM: ""  # From secrets

  # Notification Configuration
  NOTIFICATION_BATCH_SIZE: "100"
  NOTIFICATION_RETRY_ATTEMPTS: "3"
  NOTIFICATION_RETRY_DELAY: "60"

  # Webhook Configuration
  WEBHOOK_TIMEOUT: "10"
  WEBHOOK_MAX_RETRIES: "3"
  WEBHOOK_RETRY_DELAY: "30"

  # Background Tasks
  BACKGROUND_TASK_ENABLED: "true"
  BACKGROUND_TASK_WORKERS: "4"

  # Report Generation
  REPORT_GENERATION_ENABLED: "true"
  REPORT_CACHE_TTL: "3600"

  # Analytics
  ANALYTICS_ENABLED: "true"
  ANALYTICS_BATCH_SIZE: "1000"
  ANALYTICS_FLUSH_INTERVAL: "60"

  # OpenTelemetry
  OTEL_EXPORTER_JAEGER_ENDPOINT: "http://jaeger-collector:14268/api/traces"
  OTEL_SERVICE_NAME: "backend"
  OTEL_SAMPLING_PROBABILITY: "0.1"
